<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Prueba de API Municipal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 2rem;
      color: #333;
    }

    h1 {
      text-align: center;
      margin-bottom: 2rem;
      color: #0d47a1;
    }

    .test-section {
      background: white;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .test-section h2 {
      margin-top: 0;
      color: #1565c0;
    }

    .response {
      background: #f4f4f4;
      padding: 1rem;
      border-left: 4px solid #ccc;
      margin-top: 1rem;
      white-space: pre-wrap;
      font-family: monospace;
      border-radius: 4px;
    }

    .error {
      color: red;
      border-left: 4px solid red;
    }

    .success {
      color: green;
      border-left: 4px solid green;
    }
  </style>
</head>
<body>

  <h1>üîß Prueba de Rutas API - Municipio Web</h1>

  <div class="test-section">
    <h2>1. /api/news ‚Äì Obtener Noticias</h2>
    <button onclick="fetchData('/api/news')">Probar</button>
    <div id="/api/news-response" class="response">Esperando resultado...</div>
  </div>

  <div class="test-section">
    <h2>2. /api/gallery ‚Äì Galer√≠a de Im√°genes</h2>
    <button onclick="fetchData('/api/gallery')">Probar</button>
    <div id="/api/gallery-response" class="response">Esperando resultado...</div>
  </div>

  <div class="test-section">
    <h2>3. /api/messages ‚Äì Obtener Mensajes</h2>
    <button onclick="fetchData('/api/messages')">Probar</button>
    <div id="/api/messages-response" class="response">Esperando resultado...</div>
  </div>

  <script>
    async function fetchData(endpoint) {
      const containerId = endpoint.replace(/\//g, '');
      const container = document.getElementById(containerId + '-response');
      container.className = 'response';
      container.textContent = 'Cargando...';

      try {
        const res = await fetch('http://localhost:3001' + endpoint);
        const data = await res.json();

        if (res.ok) {
          container.textContent = JSON.stringify(data, null, 2);
          container.classList.add('success');
        } else {
          container.textContent = `Error ${res.status}: ${data.error || 'No se pudieron obtener los datos'}`;
          container.classList.add('error');
        }
      } catch (err) {
        container.textContent = `‚ùå Error de conexi√≥n: ${err.message}`;
        container.classList.add('error');
        console.error(err);
      }
    }
  </script>

</body>
</html>